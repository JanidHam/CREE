{% extends 'preconsulta/base.html' %}

{% load staticfiles %}

{% block title %} Agregar Paciente {% endblock title %}

{% block filesJS %}
	<script src="{% static "preconsulta/assets/js/prevaloracion.js" %}"></script>
{% endblock filesJS %}

{% block filesCSS %}
	<link rel="stylesheet" type="text/css" href="{% static "preconsulta/assets/css/prevaloracion.css" %}"/>
{% endblock filesCSS %}

{% block content %}
{% if grupo == "informacion" %}
<div class="alert alert-info" role="alert">
	<strong>Al dar clic en el boton "Nuevo Paciente" se abrira el formulario para agregar al paciente.</strong>
	<button id="showForm" type="submit" class="btn btn-success btn-sm"><i class="fa fa-edit"></i> Nuevo paciente</button>
</div>
{% endif %}
<div class="alert alert-success alert-dismissible" role="alert">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <strong>Warning!</strong> Better check yourself, you're not looking too good.
</div>
<!-- Start form oculto para agregar pacientes nuevos-->
<div class="row mt formOculto" id="form">
	<div class="col-lg-12">
		<div class="form-panel">
			<h4 class="mb"><i class="fa fa-angle-right"></i> Formulario para alta de paciente</h4>
			<form class="form-horizontal tasi-form" role="form">
				{% csrf_token %}
				<div class="form-group">
					<div class="col-lg-12">
						<div class="col-sm-3">
							<input type="text" class="form-control text-uppercase" id="curpPaciente" placeholder="CURP"required>
						</div>					
						<div class="col-sm-3">
							<input type="text" class="form-control text-uppercase" id="nombrePaciente" placeholder="Nombre" required>
						</div>
						<div class="col-lg-3">
							<input type="text" class="form-control text-uppercase" id="apellidoPPaciente" placeholder="Apellido Parterno" required>
						</div>
						<div class="col-lg-3">
							<input type="text" class="form-control text-uppercase" id="apellidoMPaciente" placeholder="Apellido Materno">
						</div>				
					</div>
				</div>
				<div class="form-group">
					<div class="col-lg-12">
						<div class="col-lg-4">
							<input type="text" class="form-control" id="edadPaciente" placeholder="Edad" disabled required>
						</div>
						<div class="col-lg-4">
							<input type="text" class="form-control" id="generoPaciente" placeholder="Genero" disabled required>
						</div>
						<div class="col-lg-4">
							<input type="text" class="form-control" id="nacimientoPaciente" placeholder="Fecha Nacimiento" disabled required>
						</div>
					</div>
				</div>
				<div class="form-group">
					<div class="col-lg-12">
						<div class="col-lg-3">
							<input type="tel" class="form-control" id="telCasaPaciente" placeholder="Telelefono Casa">
						</div>
						<div class="col-lg-3">
							<input type="tel" class="form-control" id="celularPaciente" placeholder="Celular">
						</div>
						<div class="col-lg-3">
							<select class="form-control text-uppercase" id="estadoPaciente">
								{% for edo in estados %}
									<option value="{{edo.id}}"> {{edo.descripcion}} </option>
								{% endfor %}
							</select>
						</div>
						<div class="col-lg-3">
							<input type="text" class="form-control text-uppercase" id="localidadPaciente" placeholder="Localidad">
						</div>
					</div>					
				</div>
				<div class="form-group">
					<div class="col-lg-12">
						<div class="col-lg-3">
							<input type="text" class="form-control text-uppercase" id="callePaciente" placeholder="Calle">
						</div>
						<div class="col-lg-3">
							<input type="text" class="form-control text-uppercase" id="entreCallesPaciente" placeholder="Entre Calles">
						</div>
						<div class="col-lg-3">
							<select class="form-control text-uppercase" id="ocupacionPaciente">
								{% for o in ocupaciones %}
									<option value="{{o.id}}"> {{o.descripcion}} </option>
								{% endfor %}
							</select>
						</div>
						<div class="col-lg-3">
							<select class="form-control text-uppercase" id="referidoporPaciente">
								{% for r in referidospor %}
									<option value="{{r.id}}"> {{r.descripcion}} </option>
								{% endfor %}
							</select>
						</div>						
					</div>					
				</div>
				<div class="form-group">
					<div class="col-lg-12">
						<div class="col-lg-3">
							<input type="text" class="form-control text-uppercase" id="coloniaPaciente" placeholder="Colonia">
						</div>
						<div class="col-lg-3">
							<input type="text" class="form-control text-uppercase" id="numCasaPaciente" placeholder="Num Casa">
						</div>
						<div class="col-lg-3">
							<input type="text" class="form-control" id="codigoPostalPaciente" placeholder="Codigo Postal">
						</div>
						<div class="col-lg-3">
							<select class="form-control text-uppercase" id="escolaridadPaciente">
								{% for e in escolaridades %}
									<option value="{{e.id}}"> {{e.descripcion}} </option>
								{% endfor %}
							</select>
						</div>
					</div>					
				</div>
					<button class="btn btn-theme" id="AgregarPaciente" data-loading-text="Espere..."><i class="fa fa-heart"></i> Agregar paciente</button>
			</form>
		</div><!-- /form-panel -->
	</div><!-- /col-lg-12 -->
</div>
<!-- End form oculto para agregar pacientes nuevos-->

<!--poner un div debajo del titulo-->
<div class="form-panel">
	<h4><i class="fa fa-angle-right"></i> Lista de pacientes de hoy</h4>
	<div class="lst-pacientes" id="listPacientes">
	{% for paciente in pacientes %}
			{% if paciente.correspondio == False %}
				<a href="#">
			{% elif grupo == "informacion" %}
				<a href="#">
			{% elif grupo == "revisionMedica"%}
				<a href="revision-medica/{{paciente.curp}}/">					
			{% elif grupo == "revisionPsicologica"%}
				<a href="revision-psicologica/{{paciente.curp}}/">
			{% elif grupo == "trabajoSocial"%}
				<a href="revision-estudio-socioeconomico/{{paciente.curp}}/">
			{% else %}
				<a href="#">
			{% endif %}					
			<div class="showback {{paciente.correspondio}}" id="{{paciente.curp}}">
			{{paciente.nombre}} {{paciente.apellidoP}}
			</div>
		</a>
	{% endfor %}
	</div>
</div>
<script>
var grupo = "{{ grupo }}";
var user = "{{ user }}";
</script>
{% endblock content %}